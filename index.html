<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    	<!-- meta -->
    	<title>Test for WAX</title>
    	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        
        <!-- stylesheets -->
    	<link href="css/styles.css" type="text/css" rel="stylesheet" />
        
        <!-- javascripts -->
        <script src="js/vanilla.js" type="text/javascript"></script>
        <script>
		window.onload=function(){
			
		// VANILA.JS ASSIGNMENT:
		
			//warn WAX, something is gonna happen:
			alert('Hey Jase, watch the Right Hand Side fade out!');
			//initial fadeout
			var rhs = document.getElementById('rhs').style;
			var completed = false;
			rhs.opacity = 1;
			(function fadeout(){
			   rhs.opacity-=.1;
			   if(rhs.opacity <= 0.2){
				   rhs.opacity-=.1;
				   rhs.display = 'none';
				   afterfade();
			   };
			   setTimeout(fadeout,100);
			})();
			function afterfade(){
				q=confirm('Cool. If you miss it, you can have it back...');
				if(q==true){
					rhs.display = 'block';
					rhs.opacity = 1;
				};
				clearTimeout(fadeout);
			};
			
		// API ASSIGNMENT:
			
			//weather
			var city = "Redding";
			if (window.XMLHttpRequest){
				xmlhttp=new XMLHttpRequest();
			}else{
				xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
			}
			xmlhttp.open("GET","http://api.openweathermap.org/data/2.5/find?q="+city+"&mode=xml",false);
			xmlhttp.send();
			xmlDoc=xmlhttp.responseXML;
			var temperature=xmlDoc.getElementsByTagName("temperature");
			temperature = temperature[0].getAttribute("value"); 			// get the kelvin val
			temperature = temperature - 273.15; 							// convert to celcius
			temperature = String(temperature) + '&deg;C';
			
			document.getElementById('city').innerHTML=city;
			document.getElementById('weather').innerHTML=temperature;
			
			
		};
		</script>
        
    </head>
    <body>
    	<div id="everything">
        	<div id="wrapper">
            	
                <header>
                    <div class="row">
                        <h1>This is the title. It's important!</h1>
                    </div><!-- .row -->
                </header>
                
                <main>
                    <div class="row">
                    	<div id="lhs">
                        	
                            <ul>
                            	<li>This is the first introductory bullet</li>
                                <li>This is the second bullet</li>
                                <li>Another one, just for good measure</li>
                            </ul>
                            
                            <article>
                            	<p><strong><span id="city"></span>'s Temperature:</strong> <span id="weather"></span></p>
                            	<p>This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here.</p>
                                <p>This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here.</p>
                                <p>This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here. This is the main body text area. You can write whatever you'd like here.</p>
                            </article>
                            
                        </div><!-- #lhs -->
                        <div id="rhs">
                        
                        	<div id="image">
                            	<span>Remember, no images!</span>
                            </div><!-- #image -->
                        
                        </div><!-- #rhs -->
                    </div><!-- .row -->
                </main>
                
            </div><!-- #wrapper -->
        </div><!-- #everything -->
    </body>
</html>